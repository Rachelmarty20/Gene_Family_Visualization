<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">
    <link href="../vendor/bootstrap-3.1.1-dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../vendor/jquery-ui-1.10.4/css/ui-lightness/jquery-ui-1.10.4.css">

    <!--link href="../vendor/jumbotron-narrow.css" rel="stylesheet"-->
    <script src="../vendor/D3.v3.js" charset="utf-8"></script>
    <script src="../vendor/jquery-ui-1.10.4/js/jquery-ui-1.10.4.js"></script>
    <script src="../vendor/jquery-1.11.0.min.js"></script>
    <script src="../js/run_scripts.js"></script>

    <title>Genolution</title>

    <!-- Bootstrap core CSS -->
    <link href="../vendor/bootstrap-3.1.1-dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <!--link href="../vendor/jumbotron-narrow.css" rel="stylesheet"-->
    <script src="../vendor/D3.v3.js" charset="utf-8"></script>

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  
    <style>

      .node {
        cursor: pointer;
        stroke: #3182bd;
        stroke-width: 1.5px;
      }

      .link {
        fill: none;
        stroke: #9ecae1;
        stroke-width: 1.5px;
      }

    </style>
  </head
  <body>
    <div class="container">
      <div class="header">
        <ul class="nav nav-pills pull-right">
          <li class="active"><a href="./index.html">Home</a></li>
          <li><a href="#">About</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
        <h3 class="text-muted">Genolution</h3>
      </div>  
    <script src="../vendor/D3.v3.js"></script>
    <script>
      var width = 960,
          height = 500,
          root;

      var force = d3.layout.force()
          .size([width, height])
          .on("tick", tick);

      var svg = d3.select("body").append("svg")
          .attr("width", width)
          .attr("height", height);

      var link = svg.selectAll(".link"),
          node = svg.selectAll(".node");

      d3.json("../data/flare.json", function(json) {
        root = json;
        update();
      });

      function update() {
        var nodes = flatten(root),
            links = d3.layout.tree().links(nodes);

        // Restart the force layout.
        force
            .nodes(nodes)
            .links(links)
            .start();

        // Update the links…
        link = link.data(links, function(d) { return d.target.id; });

        // Exit any old links.
        link.exit().remove();

        // Enter any new links.
        link.enter().insert("line", ".node")
            .attr("class", "link")
            .attr("x1", function(d) { return d.source.x; })
            .attr("y1", function(d) { return d.source.y; })
            .attr("x2", function(d) { return d.target.x; })
            .attr("y2", function(d) { return d.target.y; });

        // Update the nodes…
        node = node.data(nodes, function(d) { return d.id; }).style("fill", color);

        // Exit any old nodes.
        node.exit().remove();

        // Enter any new nodes.
        node.enter().append("circle")
            .attr("class", "node")
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; })
            .attr("r", function(d) { return Math.sqrt(d.size) / 10 || 4.5; })
            .style("fill", color)
            .on("click", click)
            .call(force.drag);
      }

      function tick() {
        link.attr("x1", function(d) { return d.source.x; })
            .attr("y1", function(d) { return d.source.y; })
            .attr("x2", function(d) { return d.target.x; })
            .attr("y2", function(d) { return d.target.y; });

        node.attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
      }

      // Color leaf nodes orange, and packages white or blue.
      function color(d) {
        return d._children ? "#3182bd" : d.children ? "#c6dbef" : "#fd8d3c";
      }

      // Toggle children on click.
      function click(d) {
        if (!d3.event.defaultPrevented) {
          if (d.children) {
            d._children = d.children;
            d.children = null;
          } else {
            d.children = d._children;
            d._children = null;
          }
          update();
        }
      }

      // Returns a list of all nodes under the root.
      function flatten(root) {
        var nodes = [], i = 0;

        function recurse(node) {
          if (node.children) node.children.forEach(recurse);
          if (!node.id) node.id = ++i;
          nodes.push(node);
        }

        recurse(root);
        return nodes;
      }
        
      //adding tooltips
      var jqtt = $(".node").tooltip({ track: false, 
        content: function () {
          var title = $(this).attr("title");
          return title;
        }, 
        show: { duration: 0 }, hide: { duration: 0 } });

    </script>
    <style type="text/css">
      .ui-tooltip {
          font: bold 14px "Helvetica Neue", Sans-Serif;
        }
    </style>
  </body>